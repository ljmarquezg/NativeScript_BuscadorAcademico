<ActionBar class="action-bar">
    <GridLayout columns="*, auto" rows="auto">
        <label row="0" col="0" [text]="appTitle"></label>
        <label row="0" col="1" [text]="visibilityText" class="icon white" (tap)="toggleVisivility()"></label>
    </GridLayout>
</ActionBar>

<StackLayout width="100%" height="100%" orientation="vertical">

    <StackLayout class="search-panel" width="100%" height="auto" orientation="vertical">
        <StackLayout visibility="{{visibility}}">
            <TextField #searchPanel class="text-field" autocorrect="false" id="buscarTextField" hint="Universidad de Valencia" (returnPress)="onReturn()"
                (textChange)="clearError()"></TextField>
            <label class="center" text="El campo de búsqueda no puede ser vacío" color="red" *ngIf="error"></label>
            <label class="center" text="Buscar universidad cerca de tu ubicación"></label>
            <button class="btn btn-primary" text="Ubicarme" (tap)="ubicarme()"></button>
        </StackLayout>
        <!-- <button [text]="visibilityText" class="icon btn btn-primary" (tap)="toggleVisivility()"></button> -->
    </StackLayout>

    <MapView (mapReady)="onMapReady($event)"></MapView>

    <StackLayout orientation="vertical" *ngIf="busqueda">
        <StackLayout *ngIf="isLoading" heigth="100%" orientation="vertical" margin-top="30">
            <ActivityIndicator row="1" #activityIndicator [busy]="isLoading" width="100%" height="100" class="activity-indicator"></ActivityIndicator>
            <label row="1" class="activity-indicator-label" text="Consultando información" marginTop="20" horizontalAligment="center"
                verticalAligment="center"></label>
        </StackLayout>

        <label class="h3 table-header center" textWrap="true" [text]="totalItems"></label>
        <ListView [items]="universidaditems" class="list-group" *ngIf="totalItems">
            <ng-template let-item="item">
                <GridLayout columns="*" rows="*, auto, auto" class="list-group-item">
                    <label row="0" col="0" textWrap="true" text="{{ item.name }}" class="list-group-item-heading"></label>
                    <label row="1" col="0" textWrap="true" text="{{ item.country }}" class="list-group-item-text"></label>
                    <label row="2" col="0" textWrap="true" text="{{ item.web_pages[0] }}" class="list-group-item-text"></label>
                </GridLayout>
            </ng-template>
        </ListView>
    </StackLayout>
</StackLayout>